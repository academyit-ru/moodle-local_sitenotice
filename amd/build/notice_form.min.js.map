{"version":3,"sources":["../src/notice_form.js"],"names":["define","SELECTORS","RESET_NUMBER_SELECT","RESET_UNIT_SELECT","REQACK_SELECT","AUDIENCE_SELECT","REQCOURSE_SELECT","DEFAULT_VALUES","init","reqcourseSelect","document","getElementById","resetNumberSelect","resetUnitSelect","reqackSelect","audienceSelect","value","disabled","addEventListener","event","target"],"mappings":"AAOAA,OAAM,gCAAC,EAAD,CAAK,UAAW,IAMdC,CAAAA,CAAS,CAAG,CACZC,mBAAmB,CAAE,yBADT,CAEZC,iBAAiB,CAAE,2BAFP,CAGZC,aAAa,CAAE,WAHH,CAIZC,eAAe,CAAE,aAJL,CAKZC,gBAAgB,CAAE,cALN,CANE,CAkBdC,CAAc,CAAG,CACjBL,mBAAmB,CAAE,CADJ,CAEjBC,iBAAiB,CAAE,IAFF,CAGjBC,aAAa,CAAE,GAHE,CAIjBC,eAAe,CAAE,CAJA,CAlBH,CAsElB,MAAO,CACHG,IAAI,CA1CG,QAAPA,CAAAA,IAAO,EAAW,IAEdC,CAAAA,CAAe,CAAGC,QAAQ,CAACC,cAAT,CAAwBV,CAAS,CAACK,gBAAlC,CAFJ,CAGdM,CAAiB,CAAGF,QAAQ,CAACC,cAAT,CAAwBV,CAAS,CAACC,mBAAlC,CAHN,CAIdW,CAAe,CAAGH,QAAQ,CAACC,cAAT,CAAwBV,CAAS,CAACE,iBAAlC,CAJJ,CAKdW,CAAY,CAAGJ,QAAQ,CAACC,cAAT,CAAwBV,CAAS,CAACG,aAAlC,CALD,CAMdW,CAAc,CAAGL,QAAQ,CAACC,cAAT,CAAwBV,CAAS,CAACI,eAAlC,CANH,CAQlB,GAA4B,CAAxB,CAAAI,CAAe,CAACO,KAApB,CAA+B,CAC3BJ,CAAiB,CAACI,KAAlB,CAA0BT,CAAc,CAACL,mBAAzC,CACAU,CAAiB,CAACK,QAAlB,IACAJ,CAAe,CAACG,KAAhB,CAAwBT,CAAc,CAACJ,iBAAvC,CACAU,CAAe,CAACI,QAAhB,IACAH,CAAY,CAACE,KAAb,CAAqBT,CAAc,CAACH,aAApC,CACAU,CAAY,CAACG,QAAb,IACAF,CAAc,CAACC,KAAf,CAAuBT,CAAc,CAACF,eAAtC,CACAU,CAAc,CAACE,QAAf,GACH,CAEDR,CAAe,CAACS,gBAAhB,CAAiC,QAAjC,CAA2C,SAASC,CAAT,CAAgB,CAEvD,GAAyB,CAArB,CAAAA,CAAK,CAACC,MAAN,CAAaJ,KAAjB,CAA4B,CAExBJ,CAAiB,CAACI,KAAlB,CAA0BT,CAAc,CAACL,mBAAzC,CACAU,CAAiB,CAACK,QAAlB,IACAJ,CAAe,CAACG,KAAhB,CAAwBT,CAAc,CAACJ,iBAAvC,CACAU,CAAe,CAACI,QAAhB,IACAH,CAAY,CAACE,KAAb,CAAqBT,CAAc,CAACH,aAApC,CACAU,CAAY,CAACG,QAAb,IACAF,CAAc,CAACC,KAAf,CAAuBT,CAAc,CAACF,eAAtC,CACAU,CAAc,CAACE,QAAf,GACH,CAVD,IAUO,CAEHL,CAAiB,CAACK,QAAlB,IACAJ,CAAe,CAACI,QAAhB,IACAH,CAAY,CAACG,QAAb,IACAF,CAAc,CAACE,QAAf,GACH,CACJ,CAnBD,CAoBH,CAEM,CAGV,CAzEK,CAAN","sourcesContent":["/**\n * User interaction with notice\n * @author     Jwalit Shah <jwalitshah@catalyst-au.net>\n * @copyright  Catalyst IT\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine([], function() {\n\n    /**\n     * CSS selectors\n     * @type {object}\n     */\n    var SELECTORS = {\n        RESET_NUMBER_SELECT: 'id_resetinterval_number',\n        RESET_UNIT_SELECT: 'id_resetinterval_timeunit',\n        REQACK_SELECT: 'id_reqack',\n        AUDIENCE_SELECT: 'id_audience',\n        REQCOURSE_SELECT: 'id_reqcourse'\n    };\n\n    /**\n     * Default values for the select when course completion is chosen\n     * @type {object}\n     */\n    var DEFAULT_VALUES = {\n        RESET_NUMBER_SELECT: 0,\n        RESET_UNIT_SELECT: \"60\",\n        REQACK_SELECT: \"0\",\n        AUDIENCE_SELECT: 0,\n    };\n\n    /**\n     * Initialize the sitenotice edit form.\n     * If its a course completion site notice, disable other fields\n     */\n    var init = function() {\n\n        var reqcourseSelect = document.getElementById(SELECTORS.REQCOURSE_SELECT);\n        var resetNumberSelect = document.getElementById(SELECTORS.RESET_NUMBER_SELECT);\n        var resetUnitSelect = document.getElementById(SELECTORS.RESET_UNIT_SELECT);\n        var reqackSelect = document.getElementById(SELECTORS.REQACK_SELECT);\n        var audienceSelect = document.getElementById(SELECTORS.AUDIENCE_SELECT);\n\n        if (reqcourseSelect.value > 0) {\n            resetNumberSelect.value = DEFAULT_VALUES.RESET_NUMBER_SELECT;\n            resetNumberSelect.disabled = true;\n            resetUnitSelect.value = DEFAULT_VALUES.RESET_UNIT_SELECT;\n            resetUnitSelect.disabled = true;\n            reqackSelect.value = DEFAULT_VALUES.REQACK_SELECT;\n            reqackSelect.disabled = true;\n            audienceSelect.value = DEFAULT_VALUES.AUDIENCE_SELECT;\n            audienceSelect.disabled = true;\n        }\n        // Add the onchange event as well.\n        reqcourseSelect.addEventListener('change', function(event) {\n\n            if (event.target.value > 0) {\n                // If course completion is selected, disable other methods.\n                resetNumberSelect.value = DEFAULT_VALUES.RESET_NUMBER_SELECT;\n                resetNumberSelect.disabled = true;\n                resetUnitSelect.value = DEFAULT_VALUES.RESET_UNIT_SELECT;\n                resetUnitSelect.disabled = true;\n                reqackSelect.value = DEFAULT_VALUES.REQACK_SELECT;\n                reqackSelect.disabled = true;\n                audienceSelect.value = DEFAULT_VALUES.AUDIENCE_SELECT;\n                audienceSelect.disabled = true;\n            } else {\n                // Else enable other methods.\n                resetNumberSelect.disabled = false;\n                resetUnitSelect.disabled = false;\n                reqackSelect.disabled = false;\n                audienceSelect.disabled = false;\n            }\n        });\n    };\n\n    return {\n        init : init\n    };\n});"],"file":"notice_form.min.js"}