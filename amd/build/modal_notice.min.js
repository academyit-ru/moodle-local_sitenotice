define ("local_sitenotice/modal_notice",["jquery","core/notification","core/modal","core/modal_registry","core/key_codes","core/str"],function(a,b,c,d,f,g){var h=!1,i={CLOSE_BUTTON:"[data-action=\"close\"]",ACCEPT_BUTTON:"[data-action=\"accept\"]",ACK_CHECKBOX:"sitenotice-modal-ackcheckbox",CAN_RECEIVE_FOCUS:"input:not([type=\"hidden\"]), a[href], button:not([disabled])",TOOL_TIP_WRAPPER:"#tooltip-wrapper"},j={NOTICE_ID:"data-noticeid",REQUIRED_ACKNOWLEDGE:"data-noticereqack"},k=function(a){c.call(this,a);if(!this.getFooter().find(i.CLOSE_BUTTON).length){b.exception({message:"No close button found"})}if(!this.getFooter().find(i.ACCEPT_BUTTON).length){b.exception({message:"No accept button found"})}};k.TYPE="local_sitenotice";k.prototype=Object.create(c.prototype);k.prototype.constructor=k;if(!h){d.register(k.TYPE,k,"local_sitenotice/modal_notice");h=!0}k.prototype.getCloseButtonID=function(){return"#"+this.getFooter().find(i.CLOSE_BUTTON).attr("id")};k.prototype.getAcceptButtonID=function(){return"#"+this.getFooter().find(i.ACCEPT_BUTTON).attr("id")};k.prototype.getAckCheckboxID=function(){return"#"+i.ACK_CHECKBOX};k.prototype.setNoticeId=function(a){this.getModal().attr(j.NOTICE_ID,a)};k.prototype.getNoticeId=function(){return this.getModal().attr(j.NOTICE_ID)};k.prototype.setRequiredAcknowledgement=function(c){var d=this;if(1===c){g.get_string("modal:checkboxtext","local_sitenotice").then(function(b){var c=d.getBody(),e=a("<div>",{}),f=a("<input>",{type:"checkbox",id:i.ACK_CHECKBOX}),g=a("<span>",{class:"checkboxlabel"});g.append(b);e.append(f);e.append(g);c.append(e);var h=d.getFooter().find(i.ACCEPT_BUTTON);h.show();h.attr("disabled",!0);d.getFooter().find(i.TOOL_TIP_WRAPPER).tooltip()}).catch(b.exception)}else{this.getFooter().find(i.ACCEPT_BUTTON).css("display","none")}};k.prototype.turnoffToolTip=function(){this.getFooter().find(i.TOOL_TIP_WRAPPER).tooltip("disable")};k.prototype.turnonToolTip=function(){this.getFooter().find(i.TOOL_TIP_WRAPPER).tooltip("enable")};k.prototype.registerEventListeners=function(){a(document).on("keydown",function(a){if(!this.isVisible()){return}if(a.keyCode==f.tab){this.handleTabLock(a)}}.bind(this));a(document).on("mousedown",function(a){if(!this.isVisible()){return}a.preventDefault()}.bind(this))};k.prototype.handleTabLock=function(b){var c=a(document.activeElement),d=this.modal.find(i.CAN_RECEIVE_FOCUS).filter(":visible"),e=d.first(),f=d.last(),g=!1,h=0;d.each(function(a){if(c.is(this)){g=!0;h=a}});if(!1==g){b.preventDefault();e.focus()}else{if(c.is(e)&&b.shiftKey){f.focus();b.preventDefault()}else if(c.is(f)&&!b.shiftKey){e.focus();b.preventDefault()}else{if(!b.shiftKey){var j=d.get(h+1)}else{var j=d.get(h-1)}j.focus();b.preventDefault()}}};return k});
//# sourceMappingURL=modal_notice.min.js.map
